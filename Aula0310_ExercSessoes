index.jsp
<%-- 
    Document   : index
    Created on : 09/10/2025, 10:33:16
    Author     : Tati
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <title>Cotação do Dólar</title>
    </head>
    <body>
        <div class="container">
            <h1>Cotação do Dólar</h1>
            <br>
            <br>
            <form class="form-horizontal" name="Cotacao" action="gravaCotacao.jsp" method="post">
                <div class="form-group">
                    <label  class="col-sm-2 control-label">Cotação do Dólar </label>
                    <div class="col-sm-8">
                        <input class="form-control" type="number" step="0.01" min="0" name="titulo" placeholder="Cotação do dólar hoje" required/> 
                    </div>
                </div>

                

                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <input class="btn btn-success" type="submit" value="Gravar" />
                        <input class="btn btn-warning" type="reset" value="Limpar" >

                    </div>
                </div>

            </form>
            <div class="form-group">
                <div class="col-sm-offset-3 col-sm-10">
                    <a class="btn btn-default" href="mostraCotacao.jsp" role="button">Cotação Dólar</a>
                </div>
            </div>
        </div>
    </body>
</html>


<%-- 
    Document   : gravaCotacao
    Created on : 09/10/2025, 11:02:52
    Author     : Tati
--%>

<%@page import="java.util.Date"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%
    // Pega o valor do campo do formulário
    String cotacao = request.getParameter("titulo");

    // Grava na sessão
    session.setAttribute("cotacaoDolar", cotacao);
    
    String erro = null;
    double cotacaop = 0;

    if (cotacao == null || cotacao.isEmpty()) {
        erro = "O valor da cotação não pode estar em branco.";
    } else {
        try {
            cotacaop = Double.parseDouble(cotacao);

            if (cotacaop < 0) {
                erro = "O valor da cotação não pode ser negativo.";
            }
        } catch (NumberFormatException e) {
            erro = "Valor inválido. Digite apenas números.";
        }
    }

   %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Cotação do Dólar</title>
    </head>
    <body>
        <%
            out.println("Cotação do dólar de hoje gravada com sucesso!<br>");
           
        %>
        <br><br>
        
        <a href="mostraCotacao.jsp">Lista de Cotações</a>
    </body>
</html>


<%-- 
    Document   : mostraCotacao
    Created on : 09/10/2025, 11:07:27
    Author     : Tati
--%>

<%@page import="java.util.Date"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<%
    //Etapa 1: Obter o objeto Session
    session = request.getSession(true);
    
    //Etapa 2: Obter valor de dados da sessão
    Integer numero = (Integer) session.getAttribute("contadorSessao");
    if (numero == null) numero = 1;
    else numero = numero + 1;
    session.setAttribute("contadorSessao", numero);
    // Etapa 3: Pegar cotação gravada
    String cotacao = (String) session.getAttribute("cotacaoDolar");
    
    //Etapa 3: Emitir a página%>
        
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <title>Mostrar Cotação</title>
    </head>
    <body>
        <h1>Cotação Atual do Dólar</h1>
        <%
        out.println("Cotação gravada na sessão: <b>" + cotacao + "</b><br>");
        %>
 <br><br>
    <p>Você acessou esta página <%=numero%> vezes nesta sessão.</p>
    <p>ID da Sessão: <%=session.getId()%></p>
    <p>Data de Criação: <%=new Date(session.getCreationTime())%></p>
    <p>Último Acesso: <%=new Date(session.getLastAccessedTime())%></p>
    <p>Tempo Máximo de Inatividade: <%=session.getMaxInactiveInterval()%> segundos</p>
    <br><br>
    <a href="index.jsp">Voltar para o Cadastro</a>
    
    </body></html>
<%//int umAno = 60 * 60 * 24 * 365; // 60s * 60m * 24h * 365d //%>
   <% //session.setMaxInactiveInterval(umAno);//%> 
<%//session.setMaxInactiveInterval(10);//%>
<% int umDia = 60 * 60 * 24; %>
<% session.setMaxInactiveInterval(umDia); %>
